# 鸿蒙系统 PC 版要来了？和现有国产 PC 系统有什么不同？

最近关于鸿蒙系统的消息很多。首先是9月20日，央视新闻全程直播了上海南京东路华为全球最大旗舰店的华为 Mate XT 非凡大师三折叠屏首销活动。这场直播主要是围绕着华为 Mate XT 三叠屏手机的，的确比较惊艳。在直播过程中，余承东随意提到了鸿蒙 PC，就是下面这一段。

[视频]()

在这段视频里，余承东表示，由于美国新一轮的制裁，Windows PC 停止供货，目前的华为PC将会是最后一批搭载 Windows 的笔记本，今后，替代的方案将会是鸿蒙 PC 产品。之前外界一直猜测的鸿蒙 PC ，这次算是正式官宣了。

接着在 9 月 24 日的华为 2024 年秋季全场景新品发布会，宣布**纯血鸿蒙** HarmonyOS NEXT 将于 10 月 8 日开启公测，首批参与公测的机型包括华为Mate 60系列、华为Mate X5系列，以及华为MatePad Pro 13.2英寸系列。

![](![](https://raw.githubusercontent.com/mogoweb/mywritings/master/book_wechat/2024/202409/images/harmoney_pc_comming_01.png))

虽然这次公测中没有见到鸿蒙 PC，但不用怀疑华为的决心与能力，鸿蒙 PC 版应该不会让大家等太久。

其实近几年，在政府部门的推动下，国产操作系统（统信UOS和麒麟OS）和软件的市场份额不断扩大。越来越多的企业开始使用国产操作系统和软件，国产替代正在如火如荼的进行中。甚至难以撼动的工业软件，工信部发布了目标，到2027年完成约200万套工业软件和80万台套工业操作系统更新换代任务。

现在有杀出一支新生力量，那鸿蒙 PC 系统和现有的国产 PC 系统有哪些不同呢？本文将从技术的角度分析两者的不同之处。

## 宏内核 vs 微内核

提到操作系统，最重要的当然是内核，但内核并非很多人想象的技术门槛那么高。比如如果去网上搜一搜，有诸如《30天自制操作系统》这样的书籍出版，也有 《从 0 开始写一个操作系统》这样的教程。

当然，如果一个操作系统要得到市场的认同，那技术门槛还是有些高。这就像手工敲打出一个汽车引擎，不考虑能耗，不考虑动力，不考虑性价比，当然简单，但是要开发一款动力强劲、省油而且能被广大汽车采用的引擎，就不是那么简单了。而操作系统则需要考虑更多，仅仅有内核，一台电脑啥也做不了，与之配套的生态才是至关重要。

经过这么多年的研究与开发，有关操作系统的理论和技术都比较成熟。从大类上划分，操作系统一般有宏内核（Monolithic Kernel）和微内核（Microkernel）两种架构，它们的主要区别在于内核的功能划分和实现方式。

所谓宏内核，就是将操作系统的核心功能（进程管理、内存管理、文件系统、设备驱动等）全部集成在一个单独的内核模块中，所有核心功能都在内核空间中运行，系统调用（System Calls）通过内核直接提供服务。

由于所有核心功能在内核空间中运行，不涉及频繁的上下文切换，因此系统调用和内核操作的性能较高。对于许多操作系统开发者来说，宏内核架构相对简单，因为所有核心功能集中在内核中，数据传递和调用路径短。

但是，当所有核心功能都在内核空间运行，如果某个模块（如驱动程序）出现问题，可能导致整个系统崩溃。比如早年的Windows 蓝屏，很多时候都是由于外设驱动导致的。直到现在，这个问题依然没有得到很好的解决，今年还有一起安全软件导致大批 Windows 机器蓝屏、宕机，引起全球一片哗然。

而且，由于内核的高度集成，内核代码庞大且复杂，开发、调试和维护的难度较大，修改一个模块可能需要重编译整个内核。

既然将所有核心功能集成在一起有这么多弊端，人们自然就会想到采用模块化设计，将一些功能从内核中剥离出来，这就是微内核架构。

微内核只保留最基本的功能（如进程管理、线程管理、通信机制等），而将文件系统、驱动程序、网络协议等其他功能移到用户空间运行。微内核通过消息传递的方式让内核与用户空间中的服务模块进行交互。

由于大部分功能在用户空间运行，内核本身的代码量少且简洁，某个服务模块崩溃不会影响整个系统，系统更稳定。而且，将许多系统服务放在用户空间运行，减少了内核中的代码量，降低了内核中出错或被攻击的风险。因为功能模块被分离，扩展或更改某个模块时只需修改对应的用户空间进程，无需重编译整个内核。

听起来微内核架构满是优点，但我们应该知道，模块化也是有代价的。

由于频繁的进程间通信（IPC）和上下文切换，微内核的性能通常低于宏内核，尤其在处理复杂的系统调用时，性能开销会增加。同时，微内核架构需要复杂的通信和同步机制，开发难度较大。

操作系统是伴随则电脑的发展而成长起来的，早期硬件性能比较差，所以Linux、Windows、BSD 等随着 PC 发展起来的操作系统，都是采用宏内核架构。微内核架构的理论完备之后，前有 MINIX、QNX 等系统，后来者最出名的则是谷歌最新研发的 Fuchsia。

Fuchsia 研发了这么多年，谷歌曾寄予厚望，用来取代 Android，但进展缓慢，至今还未产品化。由此可见，微内核架构所面临的挑战不小。

现有的国产系统都是基于 Linux 内核研发。Linux 经过这么多年的发展，已经非常成熟，在各种应用场合都得到了充分的验证。基于 Linux 内核研发操作系统，是一条非常稳妥的路径选择。而且 Linux 内核是开源的，且不受某些公司控制，风险也比较小。

鸿蒙系统的诞生，则有着更大的野心。华为有着完整的产品线，从智能手表、智慧屏、车机系统、智能终端、手机、平板、PC到服务器，所以华为着力构建一个跨终端的融合共享生态，为消费者打造全场景智慧生活新体验。

鸿蒙系统不能简单说采用了那种内核架构，其实阅读过 OpenHarmony 源码就知道，鸿蒙系统采用的是多内核设计，轻量系统使用 LiteOS内核，而标准系统使用的是 Linux 内核。LiteOS 内核有分为 LiteOS-M 和 LiteOS-A 两种。这是由于硬件千差万别，比如 IoT 设备和 PC，在内存大小和处理器能力方面可能相差几万倍，一种内核显然不能满足所有设备的需求。

回到纯血鸿蒙，虽然没有官方定义，但普遍认为 Harmony Next 将是一款采用微内核架构的操作系统。但我们要知道，PC 作为生产力工具，PC 操作系统的功能需求更为复杂，包括高性能的多媒体处理、大规模存储管理、复杂的用户界面渲染等。这些复杂的功能通常需要强大的驱动支持和低延迟的系统调用。微内核的设计虽然安全性高、稳定性强，但在 PC 这种需要频繁进行系统调用、设备驱动、网络和存储操作的场景下，微内核需要通过进程间通信来协调各个系统服务，而不是像宏内核那样直接在内核空间完成调用。这种设计在设备间数据交换频繁的 PC 上，可能带来性能瓶颈。

所以这次 Harmony Next 的适配名单中依然不见 PC 的踪影，一点也不奇怪。个人猜想，鸿蒙 PC 版依然会沿用当年鸿蒙手机版的策略，先搭载 Linux 内核，用模拟器或 Wine 支持 Windows 应用程序，等待克服了性能难题和生态问题之后，最后转移到纯血鸿蒙。这个转移过程要多久，可能两三年，也可能更久。

## 开放 vs 封闭

前段时间一位院士指责华为生态封闭闹得沸沸扬扬，这里不予评判。但人眼可见的事实就是，目前只有华为产品搭载鸿蒙系统。有朋友可能会说，鸿蒙系统不是开源的吗？有 Open Harmony 开源项目。
